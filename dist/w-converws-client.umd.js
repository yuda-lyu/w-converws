/*!
 * w-converws-client v1.0.32
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("ws")):"function"==typeof define&&define.amd?define(["ws"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-converws-client"]=e(t.ws)}(this,(function(t){"use strict";function e(){return"undefined"!=typeof window&&void 0!==window.document}function n(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function r(r){let o=null;r.url||(r.url="ws://localhost:8080"),r.token||(r.token="*");let i,u=function(){let t=e(),n="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;return t=t||n,{isBrowser:t,isWebWorker:n,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}}().isBrowser;i=u?("undefined"!=typeof self?self:e()?window:"undefined"!=typeof global?global:null).WebSocket:t;try{o=new i(r.url+"/?token="+r.token)}catch(t){o=null}if(null===o)return{error:"can not new MixWS"};function a(){n(r.open)&&r.open()}function c(){n(r.close)&&r.close()}function f(t){n(r.message)&&r.message(t)}function s(t){n(r.error)&&r.error(t),o.close()}return u?(o.onopen=a,o.onmessage=function(t){f(t.data)},o.onclose=c,o.onerror=s):(o.on("open",a),o.on("message",f),o.on("close",c),o.on("error",s)),o}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function u(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){if(this instanceof t){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(e,n))}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var a=Array.isArray,c="object"==typeof o&&o&&o.Object===Object&&o,f=c,s="object"==typeof self&&self&&self.Object===Object&&self,l=f||s||Function("return this")(),p=l.Symbol,v=p,h=Object.prototype,y=h.hasOwnProperty,d=h.toString,g=v?v.toStringTag:void 0;var b=function(t){var e=y.call(t,g),n=t[g];try{t[g]=void 0;var r=!0}catch(t){}var o=d.call(t);return r&&(e?t[g]=n:delete t[g]),o},_=Object.prototype.toString;var w=b,m=function(t){return _.call(t)},j=p?p.toStringTag:void 0;var A=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?w(t):m(t)};var x=function(t){return null!=t&&"object"==typeof t},O=A,S=x;var U=function(t){return"symbol"==typeof t||S(t)&&"[object Symbol]"==O(t)},B=a,k=U,C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/;var E=function(t,e){if(B(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!k(t))||(P.test(t)||!C.test(t)||null!=e&&t in Object(e))};var z=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},T=A,M=z;var L,F=function(t){if(!M(t))return!1;var e=T(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},I=l["__core-js_shared__"],$=(L=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"";var N=function(t){return!!$&&$ in t},W=Function.prototype.toString;var R=F,D=N,H=z,q=function(t){if(null!=t){try{return W.call(t)}catch(t){}try{return t+""}catch(t){}}return""},G=/^\[object .+?Constructor\]$/,V=Function.prototype,J=Object.prototype,K=V.toString,Q=J.hasOwnProperty,X=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Y=function(t){return!(!H(t)||D(t))&&(R(t)?X:G).test(q(t))},Z=function(t,e){return null==t?void 0:t[e]};var tt=function(t,e){var n=Z(t,e);return Y(n)?n:void 0},et=tt(Object,"create"),nt=et;var rt=function(){this.__data__=nt?nt(null):{},this.size=0};var ot=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},it=et,ut=Object.prototype.hasOwnProperty;var at=function(t){var e=this.__data__;if(it){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ut.call(e,t)?e[t]:void 0},ct=et,ft=Object.prototype.hasOwnProperty;var st=et;var lt=rt,pt=ot,vt=at,ht=function(t){var e=this.__data__;return ct?void 0!==e[t]:ft.call(e,t)},yt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=st&&void 0===e?"__lodash_hash_undefined__":e,this};function dt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}dt.prototype.clear=lt,dt.prototype.delete=pt,dt.prototype.get=vt,dt.prototype.has=ht,dt.prototype.set=yt;var gt=dt;var bt=function(){this.__data__=[],this.size=0};var _t=function(t,e){return t===e||t!=t&&e!=e},wt=_t;var mt=function(t,e){for(var n=t.length;n--;)if(wt(t[n][0],e))return n;return-1},jt=mt,At=Array.prototype.splice;var xt=mt;var Ot=mt;var St=mt;var Ut=bt,Bt=function(t){var e=this.__data__,n=jt(e,t);return!(n<0)&&(n==e.length-1?e.pop():At.call(e,n,1),--this.size,!0)},kt=function(t){var e=this.__data__,n=xt(e,t);return n<0?void 0:e[n][1]},Ct=function(t){return Ot(this.__data__,t)>-1},Pt=function(t,e){var n=this.__data__,r=St(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Et.prototype.clear=Ut,Et.prototype.delete=Bt,Et.prototype.get=kt,Et.prototype.has=Ct,Et.prototype.set=Pt;var zt=Et,Tt=tt(l,"Map"),Mt=gt,Lt=zt,Ft=Tt;var It=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var $t=function(t,e){var n=t.__data__;return It(e)?n["string"==typeof e?"string":"hash"]:n.map},Nt=$t;var Wt=$t;var Rt=$t;var Dt=$t;var Ht=function(){this.size=0,this.__data__={hash:new Mt,map:new(Ft||Lt),string:new Mt}},qt=function(t){var e=Nt(this,t).delete(t);return this.size-=e?1:0,e},Gt=function(t){return Wt(this,t).get(t)},Vt=function(t){return Rt(this,t).has(t)},Jt=function(t,e){var n=Dt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Kt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kt.prototype.clear=Ht,Kt.prototype.delete=qt,Kt.prototype.get=Gt,Kt.prototype.has=Vt,Kt.prototype.set=Jt;var Qt=Kt;function Xt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u)||i,u};return n.cache=new(Xt.Cache||Qt),n}Xt.Cache=Qt;var Yt=Xt;var Zt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/\\(\\)?/g,ee=function(t){var e=Yt(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Zt,(function(t,n,r,o){e.push(r?o.replace(te,"$1"):n||t)})),e}));var ne=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o},re=a,oe=U,ie=p?p.prototype:void 0,ue=ie?ie.toString:void 0;var ae=function t(e){if("string"==typeof e)return e;if(re(e))return ne(e,t)+"";if(oe(e))return ue?ue.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n},ce=ae;var fe=function(t){return null==t?"":ce(t)},se=a,le=E,pe=ee,ve=fe;var he=U;var ye=function(t,e){return se(t)?t:le(t,e)?[t]:pe(ve(t))},de=function(t){if("string"==typeof t||he(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var ge=function(t,e){for(var n=0,r=(e=ye(e,t)).length;null!=t&&n<r;)t=t[de(e[n++])];return n&&n==r?t:void 0};var be=function(t,e,n){var r=null==t?void 0:ge(t,e);return void 0===r?n:r};var _e=/\s/;var we=function(t){for(var e=t.length;e--&&_e.test(t.charAt(e)););return e},me=/^\s+/;var je=function(t){return t?t.slice(0,we(t)+1).replace(me,""):t},Ae=z,xe=U,Oe=/^[-+]0x[0-9a-f]+$/i,Se=/^0b[01]+$/i,Ue=/^0o[0-7]+$/i,Be=parseInt;var ke=function(t){if("number"==typeof t)return t;if(xe(t))return NaN;if(Ae(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ae(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=je(t);var n=Se.test(t);return n||Ue.test(t)?Be(t.slice(2),n?2:8):Oe.test(t)?NaN:+t},Ce=ke,Pe=1/0;var Ee=function(t){return t?(t=Ce(t))===Pe||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},ze=Ee;var Te=function(t){var e=ze(t),n=e%1;return e==e?n?e-n:e:0},Me=Te;var Le=function(t){return"number"==typeof t&&t==Me(t)};function Fe(t){return"[object String]"===Object.prototype.toString.call(t)}function Ie(t){return!(!Fe(t)||""===t)}function $e(t){let e=!1;return Ie(t)?e=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(e=!0),e}function Ne(t){if(!$e(t))return 0;return Ee(t)}function We(t){return!!$e(t)&&(t=Ne(t),Le(t))}var Re=Te,De=ke,He=fe,qe=l.isFinite,Ge=Math.min;var Ve=function(t){var e=Math[t];return function(t,n){if(t=De(t),(n=null==n?0:Ge(Re(n),292))&&qe(t)){var r=(He(t)+"e").split("e"),o=e(r[0]+"e"+(+r[1]+n));return+((r=(He(o)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}("round");function Je(t){if(!$e(t))return 0;t=Ne(t);let e=Ve(t);return"0"===String(e)?0:e}let Ke="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Qe=Ke.length;function Xe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,e=[];var n;t=We(n=t)&&Je(n)>0?Je(t):32;for(let n=0;n<t;n++)e[n]=Ke[0|Math.random()*Qe];return e.join("")}var Ye={};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,u){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||t,u),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,u=new Array(i);o<i;o++)u[o]=r[o].fn;return u},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,o,i,u){var a=n?n+t:t;if(!this._events[a])return!1;var c,f,s=this._events[a],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,r),!0;case 4:return s.fn.call(s.context,e,r,o),!0;case 5:return s.fn.call(s.context,e,r,o,i),!0;case 6:return s.fn.call(s.context,e,r,o,i,u),!0}for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];s.fn.apply(s.context,c)}else{var p,v=s.length;for(f=0;f<v;f++)switch(s[f].once&&this.removeListener(t,s[f].fn,void 0,!0),l){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,e);break;case 3:s[f].fn.call(s[f].context,e,r);break;case 4:s[f].fn.call(s[f].context,e,r,o);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];s[f].fn.apply(s[f].context,c)}}return!0},a.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||r&&a.context!==r||u(this,i);else{for(var c=0,f=[],s=a.length;c<s;c++)(a[c].fn!==e||o&&!a[c].once||r&&a[c].context!==r)&&f.push(a[c]);f.length?this._events[i]=1===f.length?f[0]:f:u(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&u(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}({get exports(){return Ye},set exports(t){Ye=t}});var Ze=Ye;function tn(){return new Ze}var en=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i};var nn=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},rn=F,on=nn;var un=function(t){return null!=t&&on(t.length)&&!rn(t)},an=/^(?:0|[1-9]\d*)$/;var cn=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&an.test(t))&&t>-1&&t%1==0&&t<e},fn=_t,sn=un,ln=cn,pn=z;var vn=function(t,e,n){if(!pn(n))return!1;var r=typeof e;return!!("number"==r?sn(n)&&ln(e,n.length):"string"==r&&e in n)&&fn(n[e],t)},hn=en,yn=vn,dn=Te,gn=Math.ceil,bn=Math.max;var _n=function(t,e,n){e=(n?yn(t,e,n):void 0===e)?1:bn(dn(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,i=0,u=Array(gn(r/e));o<r;)u[i++]=hn(t,o,o+=e);return u},wn=Array.prototype.join;var mn=function(t,e){return null==t?"":wn.call(t,e)},jn={},An={get exports(){return jn},set exports(t){jn=t}};var xn=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};var On=function(t){return function(e,n,r){for(var o=-1,i=Object(e),u=r(e),a=u.length;a--;){var c=u[t?a:++o];if(!1===n(i[c],c,i))break}return e}}();var Sn=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Un=A,Bn=x;var kn=function(t){return Bn(t)&&"[object Arguments]"==Un(t)},Cn=x,Pn=Object.prototype,En=Pn.hasOwnProperty,zn=Pn.propertyIsEnumerable,Tn=kn(function(){return arguments}())?kn:function(t){return Cn(t)&&En.call(t,"callee")&&!zn.call(t,"callee")},Mn=Tn,Ln={};var Fn=function(){return!1};!function(t,e){var n=l,r=Fn,o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,u=i&&i.exports===o?n.Buffer:void 0,a=(u?u.isBuffer:void 0)||r;t.exports=a}({get exports(){return Ln},set exports(t){Ln=t}},Ln);var In=A,$n=nn,Nn=x,Wn={};Wn["[object Float32Array]"]=Wn["[object Float64Array]"]=Wn["[object Int8Array]"]=Wn["[object Int16Array]"]=Wn["[object Int32Array]"]=Wn["[object Uint8Array]"]=Wn["[object Uint8ClampedArray]"]=Wn["[object Uint16Array]"]=Wn["[object Uint32Array]"]=!0,Wn["[object Arguments]"]=Wn["[object Array]"]=Wn["[object ArrayBuffer]"]=Wn["[object Boolean]"]=Wn["[object DataView]"]=Wn["[object Date]"]=Wn["[object Error]"]=Wn["[object Function]"]=Wn["[object Map]"]=Wn["[object Number]"]=Wn["[object Object]"]=Wn["[object RegExp]"]=Wn["[object Set]"]=Wn["[object String]"]=Wn["[object WeakMap]"]=!1;var Rn=function(t){return Nn(t)&&$n(t.length)&&!!Wn[In(t)]};var Dn=function(t){return function(e){return t(e)}},Hn={};!function(t,e){var n=c,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r&&n.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=u}({get exports(){return Hn},set exports(t){Hn=t}},Hn);var qn=Rn,Gn=Dn,Vn=Hn&&Hn.isTypedArray,Jn=Vn?Gn(Vn):qn,Kn=Sn,Qn=Mn,Xn=a,Yn=Ln,Zn=cn,tr=Jn,er=Object.prototype.hasOwnProperty;var nr=function(t,e){var n=Xn(t),r=!n&&Qn(t),o=!n&&!r&&Yn(t),i=!n&&!r&&!o&&tr(t),u=n||r||o||i,a=u?Kn(t.length,String):[],c=a.length;for(var f in t)!e&&!er.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Zn(f,c))||a.push(f);return a},rr=Object.prototype;var or=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||rr)};var ir=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),ur=or,ar=ir,cr=Object.prototype.hasOwnProperty;var fr=nr,sr=function(t){if(!ur(t))return ar(t);var e=[];for(var n in Object(t))cr.call(t,n)&&"constructor"!=n&&e.push(n);return e},lr=un;var pr=On,vr=function(t){return lr(t)?fr(t):sr(t)};var hr=un;var yr=function(t,e){return function(n,r){if(null==n)return n;if(!hr(n))return t(n,r);for(var o=n.length,i=e?o:-1,u=Object(n);(e?i--:++i<o)&&!1!==r(u[i],i,u););return n}}((function(t,e){return t&&pr(t,e,vr)}));var dr=function(t){return t};var gr=xn,br=yr,_r=function(t){return"function"==typeof t?t:dr},wr=a;var mr=function(t,e){return(wr(t)?gr:br)(t,_r(e))};!function(t){t.exports=mr}(An);var jr=i(jn);function Ar(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function xr(t){return"[object Uint16Array]"===Object.prototype.toString.call(t)}function Or(t){if(!We(t))return!1;return Je(t)>=0}function Sr(t,e){return Ie(t)&&Or(e)?0===(e=Je(e))?"":t.substring(0,e):""}function Ur(t,e){return Ie(t)&&Or(e)?0===(e=Je(e))?t:function(t,e){if(!Ie(t))return"";if(!Or(e))return"";if(0===(e=Je(e)))return"";let n=t.length-e;return n<0&&(n=0),t.substr(n,e)}(t,t.length-e):""}var Br={},kr={get exports(){return Br},set exports(t){Br=t}};var Cr,Pr={},Er={get exports(){return Pr},set exports(t){Pr=t}},zr=u(Object.freeze({__proto__:null,default:{}}));function Tr(){return Cr||(Cr=1,function(t,e){var n;t.exports=(n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==o&&o.crypto&&(n=o.crypto),!n)try{n=zr}catch(t){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),u={},a=u.lib={},c=a.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},f=a.WordArray=c.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var u=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=u<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)e[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new f.init(e,t)}}),s=u.enc={},l=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new f.init(n,e/2)}},p=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new f.init(n,e)}},v=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},h=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=v.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,o=r.words,i=r.sigBytes,u=this.blockSize,a=i/(4*u),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*u,s=t.min(4*c,i);if(c){for(var l=0;l<c;l+=u)this._doProcessBlock(o,l);n=o.splice(0,c),r.sigBytes-=s}return new f.init(n,s)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});a.Hasher=h.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new y.HMAC.init(t,n).finalize(e)}}});var y=u.algo={};return u}(Math),n)}(Er)),Pr}!function(t,e){var n;t.exports=(n=Tr(),function(){var t=n,e=t.lib.WordArray;function r(t,n,r){for(var o=[],i=0,u=0;u<n;u++)if(u%4){var a=r[t.charCodeAt(u-1)]<<u%4*2|r[t.charCodeAt(u)]>>>6-u%4*2;o[i>>>2]|=a<<24-i%4*8,i++}return e.create(o,i)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var u=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(u>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var e=t.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var u=n.charAt(64);if(u){var a=t.indexOf(u);-1!==a&&(e=a)}return r(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}(kr);var Mr=Br,Lr={};!function(t,e){var n;t.exports=(n=Tr(),function(){if("function"==typeof ArrayBuffer){var t=n.lib.WordArray,e=t.init,r=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=t[o]<<24-o%4*8;e.call(this,r,n)}else e.apply(this,arguments)};r.prototype=t}}(),n.lib.WordArray)}({get exports(){return Lr},set exports(t){Lr=t}});var Fr=Lr;function Ir(t){if(!Ar(t))return"";return Fr.create(t).toString(Mr)}function $r(t){if(!Fe(t))return new Uint8Array;let e=Mr.parse(t),n=e.words,r=e.sigBytes,o=new Uint8Array(r);for(let t=0;t<r;t++){let e=n[t>>>2]>>>24-t%4*8&255;o[t]=e}return o}function Nr(t){return xr(t)?Ir(function(t){return xr(t)?new Uint8Array(t):new Uint8Array}(t)):""}function Wr(t){if(!Fe(t))return new Uint16Array;let e=function(t){return Ar(t)?new Uint16Array(t):new Uint16Array}($r(t));return e}let Rr="[Uint8Array]::";let Dr="[Uint16Array]::";let Hr={tagU8A:Rr,u8arr2b64:function(t){return Ar(t)?Rr+Ir(t):t},b642u8arr:function(t){return Fe(t)&&Sr(t,Rr.length)===Rr?$r(t=Ur(t,Rr.length)):t},tagU16A:Dr,u16arr2b64:function(t){return xr(t)?Dr+Nr(t):t},b642u16arr:function(t){return Fe(t)&&Sr(t,Dr.length)===Dr?Wr(t=Ur(t,Dr.length)):t}};function qr(t){return"[object Array]"===Object.prototype.toString.call(t)}function Gr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Uint8Array";if(n=t,"[object Undefined]"===Object.prototype.toString.call(n))return"";var n;if(Fe(e))e=[e];else if(!qr(e))return"";let r="";try{r=JSON.stringify(t,(function(t,n){return e.indexOf("Uint8Array")>=0&&(n=Hr.u8arr2b64(n)),e.indexOf("Uint16Array")>=0&&(n=Hr.u16arr2b64(n)),n}))}catch(t){r=""}return r}var Vr=en;var Jr=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Vr(t,e,n)},Kr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Qr=function(t){return Kr.test(t)},Xr=A,Yr=x;var Zr=function(t){return Yr(t)&&"[object RegExp]"==Xr(t)},to=Dn,eo=Hn&&Hn.isRegExp,no=eo?to(eo):Zr;var ro=function(t){return t.split("")},oo="\\ud800-\\udfff",io="["+oo+"]",uo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ao="\\ud83c[\\udffb-\\udfff]",co="[^"+oo+"]",fo="(?:\\ud83c[\\udde6-\\uddff]){2}",so="[\\ud800-\\udbff][\\udc00-\\udfff]",lo="(?:"+uo+"|"+ao+")"+"?",po="[\\ufe0e\\ufe0f]?",vo=po+lo+("(?:\\u200d(?:"+[co,fo,so].join("|")+")"+po+lo+")*"),ho="(?:"+[co+uo+"?",uo,fo,so,io].join("|")+")",yo=RegExp(ao+"(?="+ao+")|"+ho+vo,"g");var go=ro,bo=Qr,_o=function(t){return t.match(yo)||[]};var wo=ae,mo=Jr,jo=Qr,Ao=vn,xo=no,Oo=function(t){return bo(t)?_o(t):go(t)},So=fe;var Uo=function(t,e,n){return n&&"number"!=typeof n&&Ao(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=So(t))&&("string"==typeof e||null!=e&&!xo(e))&&!(e=wo(e))&&jo(t)?mo(Oo(t),0,n):t.split(e,n):[]},Bo=en,ko=Te;var Co=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:ko(e),Bo(t,e<0?0:e,r)):[]},Po=Math.ceil,Eo=Math.max;var zo=function(t,e,n,r){for(var o=-1,i=Eo(Po((e-t)/(n||1)),0),u=Array(i);i--;)u[r?i:++o]=t,t+=n;return u},To=vn,Mo=Ee;var Lo=function(t){return function(e,n,r){return r&&"number"!=typeof r&&To(e,n,r)&&(n=r=void 0),e=Mo(e),void 0===n?(n=e,e=0):n=Mo(n),r=void 0===r?e<n?1:-1:Mo(r),zo(e,n,r,t)}}();function Fo(t,e){return n=t,"[object Object]"===Object.prototype.toString.call(n)&&(!(!Ie(e)&&!$e(e))&&e in t);var n}let Io={};function $o(t,e){let n=Uo(t,"|"),r=n[0],o=ke(n[1]),i=ke(n[2]),u=mn(Co(n,3),"|");if(Fo(Io,r)||(Io[r]={}),Io[r]["_"+o]=u,o===i-1){let t="";jr(Lo(i),(function(e){t+=Io[r]["_"+e]})),delete Io[r];let n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Uint8Array";if(Fe(e))e=[e];else if(!qr(e))return{};let n={};try{n=JSON.parse(t,(function(t,n){return e.indexOf("Uint8Array")>=0&&(n=Hr.b642u8arr(n)),e.indexOf("Uint16Array")>=0&&(n=Hr.b642u16arr(n)),n}))}catch(t){n={}}return n}(t);e(n)}}return function(t){let e=!1,n=null,o=new tn,i=new tn;function u(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];setTimeout((()=>{o.emit(t,...n)}),1)}function a(){t.url||(t.url="ws://localhost:8080"),t.token||(t.token="*"),t.strSplitLength||(t.strSplitLength=1e6);let a={url:t.url,token:t.token,open:function(){u("open"),e||(u("openOnce"),e=!0)},close:function(){u("close"),c()},message:function(t){!function(t){$o(t,s)}(t)},error:function(t){f(t)}};try{n=new r(a)}catch(t){return u("error",{msg:"can not create websocket",err:t}),void c()}if(be(n,"error"))return u("error",{msg:"can not create websocket",err:"can not new MixWS in WWebsocketClient"}),void c();function f(t){u("error",{msg:"websocket error",err:t}),n.close()}function s(t){let e=be(t,"_mode","");if("execute"===e)if(be(t,"_id")&&be(t,"output")){let e=be(t,"_id"),n=be(t,"output");i.emit(e,n)}else u("error",{msg:"can not find _id and output in data",err:t});else"broadcast"===e?u("broadcast",be(t,"data")):"deliver"===e?u("deliver",be(t,"data")):f({msg:"can not find _mode in data",err:t})}function l(e,r){n.readyState===n.OPEN&&function(t,e,n,r,o){let i=Gr(n),u=_n(i,e),a=Xe(),c=u.length;jr(u,(function(e,n){e=mn(e,"");let i=`${a}|${n}|${c}|${e}`;t.send(i,(function(t){t&&F(o)&&o(t)})),F(r)&&r((n+1)/c*100)}))}(n,t.strSplitLength,e,r,(function(t){u("error",{msg:"can not send message",err:t})}))}o.removeAllListeners("triggerExecute"),o.on("triggerExecute",(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=Xe();l({_mode:"execute",_id:o,func:t,input:e},r),i.on(o,(function(t){n(t),i.removeAllListeners(o)}))})),o.removeAllListeners("triggerBroadcast"),o.on("triggerBroadcast",(function(t,e){l({_mode:"broadcast",data:t},e)})),o.removeAllListeners("triggerDeliver"),o.on("triggerDeliver",(function(t,e){l({_mode:"deliver",data:t},e)}))}function c(){setTimeout((function(){u("reconn"),a()}),1e3)}return o.execute=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=function(){let t,e,n=new Promise((function(){t=arguments[0],e=arguments[1]}));return n.resolve=t,n.reject=e,n}();return u("triggerExecute",t,e,(function(t){r.resolve(t)}),n),r},o.broadcast=function(t){u("triggerBroadcast",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){})},o.deliver=function(t){u("triggerDeliver",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){})},a(),o}}));
//# sourceMappingURL=w-converws-client.umd.js.map
