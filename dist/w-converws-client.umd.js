/*!
 * w-converws-client v1.0.6
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ws")):"function"==typeof define&&define.amd?define(["ws"],t):(e=e||self,e["w-converws-client"]=t(e.ws))})(this,function(e){'use strict';var K=Math.max,ee=Math.ceil,te=Math.min;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function o(t){function n(){r(t.open)&&t.open()}function o(){r(t.close)&&t.close()}function i(e){r(t.message)&&t.message(e)}function s(e){r(t.error)&&t.error(e),a.close()}var a=null;t.url||(t.url="ws://localhost:8080"),t.token||(t.token="*");var d,l="undefined"!=typeof window;d=l?window.WebSocket:e;try{a=new d(t.url+"/?token="+t.token)}catch(e){return null}return l?(a.onopen=n,a.onmessage=function(e){var t=e.data;i(t)},a.onclose=o,a.onerror=s):(a.on("open",n),a.on("message",i),a.on("close",o),a.on("error",s)),a}function i(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ae&&Ae in Object(e)?be(e):je(e)}function s(e){return null!=e&&"object"==t(e)}function a(e){return"symbol"==t(e)||ve(e)&&xe(e)=="[object Symbol]"}function d(e,n){if(ie(e))return!1;var r=t(e);return!!("number"==r||"symbol"==r||"boolean"==r||null==e||Oe(e))||we.test(e)||!Se.test(e)||null!=n&&e in Object(n)}function l(e){var n=t(e);return null!=e&&("object"==n||"function"==n)}function c(e){return!!Ue&&Ue in e}function p(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function g(e){var n=t(e);return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}function y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function f(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(f.Cache||ot),n}function h(e){if("string"==typeof e)return e;if(ie(e))return dt(e,h)+"";if(Oe(e))return pt?pt.call(e):"";var t=e+"";return"0"==t&&1/e==-lt?"-0":t}function b(){var e,t,n=new Promise(function(){e=arguments[0],t=arguments[1]});return n.resolve=e,n.reject=t,n}function _(e){var t=Object.prototype.toString.call(e);return"[object String]"===t}function m(e){return!!(_(e)&&""!==e)}function j(e){var t=Object.prototype.toString.call(e);return"[object Number]"===t}function A(e){var t=!1;return m(e)?t=!isNaN(+e):j(e)&&(t=!0),t}function x(e){if(!A(e))return 0;var t=wt(e);return t}function O(e){return!!A(e)&&(e=x(e),Lt(e))}function S(e){if(!A(e))return 0;e=x(e);var t=Ut(e);return"0"===t+""?0:t}function w(e){if(!O(e))return!1;var t=0<S(e);return t}function k(){var e,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:32,n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=[],s=n.length;if(w(t))for(e=0;e<t;e++)o[e]=n[0|Math.random()*s];else if("rfc4122"===t){o[8]=o[13]=o[18]=o[23]="-",o[14]="4";var a;for(e=0;36>e;e++)o[e]||(a=0|16*Math.random(),o[e]=n[19===e?8|3&a:a])}else return"";var d=o.join("");return d}function L(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t}function B(e){if(L(e)){for(var t in e)return!0;return!1}return!1}function E(e,t){return B(e)?m(t)?bt(e,t,""):"":""}function U(e){if(!m(e)&&!A(e))return"";return e+""}function P(e,t){var n=E(e,t);return n=U(n),n}function z(e,n){var r=t(e);return n=null==n?9007199254740991:n,!!n&&("number"==r||"symbol"!=r&&Ct.test(e))&&-1<e&&0==e%1&&e<n}function T(e,n,r){if(!ke(r))return!1;var o=t(n);return!("number"==o?!(Tt(r)&&Ft(n,r.length)):!("string"==o&&n in r))&&Ze(r[n],e)}function C(e){var t=Object.prototype.toString.call(e);return"[object Uint8Array]"===t}function F(e){var t=Object.prototype.toString.call(e);return"[object Uint16Array]"===t}function R(e,t){return m(e)?w(t)?e.substr(0,t):"":""}function N(e,t){if(!m(e))return"";if(!w(t))return"";var n=e.length-t;return 0>n&&(n=0),e.substr(n,t)}function M(e,t){return m(e)?w(t)?N(e,e.length-t):"":""}function V(e){if(!C(e))return"";var t=jn.create(e),n=t.toString(mn);return n}function D(e){if(!_(e))return new Uint8Array;for(var t,n=mn.parse(e),r=n.words,o=n.sigBytes,s=new Uint8Array(o),a=0;a<o;a++)t=255&r[a>>>2]>>>24-8*(a%4),s[a]=t;return s}function I(e){return F(e)?new Uint8Array(e):new Uint8Array}function H(e){return F(e)?V(I(e)):""}function W(e){return C(e)?new Uint16Array(e):new Uint16Array}function $(e){if(!_(e))return new Uint16Array;var t=D(e),n=W(t);return n}function q(e){var t=Object.prototype.toString.call(e);return"[object Undefined]"===t}function G(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t}function Q(e){function t(e,t){return 0<=n.indexOf("Uint8Array")&&(t=An.u8arr2b64(t)),0<=n.indexOf("Uint16Array")&&(t=An.u16arr2b64(t)),t}var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"Uint8Array";if(q(e))return"";if(_(n))n=[n];else if(G(n));else return"";var r="";try{r=JSON.stringify(e,t)}catch(e){r=""}return r}function J(e,t,n,r,o){var i=Q(n),s=Nt(i,t),a=k(),d=s.length;bn(s,function(t,n){t=Dt(t,"");var i="".concat(a,"|").concat(n,"|").concat(d,"|").concat(t);e.send(i,function(e){e&&Le(o)&&o(e)}),Le(r)&&r(100*((n+1)/d))})}function X(e){function t(e,t){return 0<=n.indexOf("Uint8Array")&&(t=An.b642u8arr(t)),0<=n.indexOf("Uint16Array")&&(t=An.b642u16arr(t)),t}var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"Uint8Array";if(_(n))n=[n];else if(G(n));else return{};var r={};try{r=JSON.parse(e,t)}catch(e){r={}}return r}function Y(e,t){return!!L(e)&&!!m(t)&&t in e}function Z(e,t){var n=Vn(e,"|"),r=n[0],o=Ot(n[1]),i=Ot(n[2]),s=Dt(Dn(n,3));if(Y($n,r)||($n[r]={}),$n[r]["_"+o]=s,o===i-1){var a="";bn(Wn(i),function(e){a+=$n[r]["_"+e]}),delete $n[r];var d=X(a);t(d)}}e=e&&e.hasOwnProperty("default")?e["default"]:e;var ne="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,re=n(function(e){(function(n){function r(){}function o(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}function s(e){return!!("function"==typeof e||e instanceof RegExp)||!!(e&&"object"===t(e))&&s(e.listener)}var a=r.prototype,d=n.EventEmitter;a.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},a.addListener=function(e,n){if(!s(n))throw new TypeError("listener must be a function");var r,i=this.getListenersAsObject(e),a="object"===t(n);for(r in i)i.hasOwnProperty(r)&&-1===o(i[r],n)&&i[r].push(a?n:{listener:n,once:!1});return this},a.on=i("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=i("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&(n=o(i[r],t),-1!==n&&i[r].splice(n,1));return this},a.off=i("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,n,r){var o,s,a=e?this.removeListener:this.addListener,d=e?this.removeListeners:this.addListeners;if("object"===t(n)&&!(n instanceof RegExp))for(o in n)n.hasOwnProperty(o)&&(s=n[o])&&("function"==typeof s?a.call(this,o,s):d.call(this,o,s));else for(o=r.length;o--;)a.call(this,n,r[o]);return this},a.removeEvent=function(e){var n,r=t(e),o=this._getEvents();if("string"===r)delete o[e];else if(e instanceof RegExp)for(n in o)o.hasOwnProperty(n)&&e.test(n)&&delete o[n];else delete this._events;return this},a.removeAllListeners=i("removeEvent"),a.emitEvent=function(e,t){var n,r,o,s,a,d=this.getListenersAsObject(e);for(s in d)if(d.hasOwnProperty(s))for(n=d[s].slice(0),o=0;o<n.length;o++)r=n[o],!0===r.once&&this.removeListener(e,r.listener),a=r.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},a.trigger=i("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return n.EventEmitter=d,r},e.exports?e.exports=r:n.EventEmitter=r})("undefined"==typeof window?ne||{}:window)}),oe=Array.isArray,ie=oe,se="object"==t(ne)&&ne&&ne.Object===Object&&ne,ae=se,de="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,le=ae||de||Function("return this")(),ce=le,pe=ce.Symbol,ue=pe,ge=Object.prototype,ye=ge.hasOwnProperty,fe=ge.toString,he=ue?ue.toStringTag:void 0,be=function(e){var t=ye.call(e,he),n=e[he];try{e[he]=void 0;var r=!0}catch(t){}var o=fe.call(e);return r&&(t?e[he]=n:delete e[he]),o},_e=Object.prototype,me=_e.toString,je=function(e){return me.call(e)},Ae=ue?ue.toStringTag:void 0,xe=i,ve=s,Oe=a,Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,we=/^\w*$/,ke=l,Le=function(e){if(!ke(e))return!1;var t=xe(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Be=ce["__core-js_shared__"],Ee=Be,Ue=function(){var e=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Pe=Function.prototype,ze=Pe.toString,Te=function(e){if(null!=e){try{return ze.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Ce=/[\\^$.*+?()[\]{}|]/g,Fe=/^\[object .+?Constructor\]$/,Re=Function.prototype,Ne=Object.prototype,Me=Re.toString,Ve=Ne.hasOwnProperty,De=RegExp("^"+Me.call(Ve).replace(Ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=function(e){if(!ke(e)||c(e))return!1;var t=Le(e)?De:Fe;return t.test(Te(e))},He=function(e,t){return null==e?void 0:e[t]},We=function(e,t){var n=He(e,t);return Ie(n)?n:void 0},$e=We(Object,"create"),qe=$e,Ge=Object.prototype,Qe=Ge.hasOwnProperty,Je=Object.prototype,Xe=Je.hasOwnProperty;p.prototype.clear=function(){this.__data__=qe?qe(null):{},this.size=0},p.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},p.prototype.get=function(e){var t=this.__data__;if(qe){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Qe.call(t,e)?t[e]:void 0},p.prototype.has=function(e){var t=this.__data__;return qe?t[e]!==void 0:Xe.call(t,e)},p.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=qe&&void 0===t?"__lodash_hash_undefined__":t,this};var Ye=p,Ze=function(e,t){return e===t||e!==e&&t!==t},Ke=function(e,t){for(var n=e.length;n--;)if(Ze(e[n][0],t))return n;return-1},et=Array.prototype,tt=et.splice;u.prototype.clear=function(){this.__data__=[],this.size=0},u.prototype["delete"]=function(e){var t=this.__data__,n=Ke(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():tt.call(t,n,1),--this.size,!0},u.prototype.get=function(e){var t=this.__data__,n=Ke(t,e);return 0>n?void 0:t[n][1]},u.prototype.has=function(e){return-1<Ke(this.__data__,e)},u.prototype.set=function(e,t){var n=this.__data__,r=Ke(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this};var nt=We(ce,"Map"),rt=function(e,t){var n=e.__data__;return g(t)?n["string"==typeof t?"string":"hash"]:n.map};y.prototype.clear=function(){this.size=0,this.__data__={hash:new Ye,map:new(nt||u),string:new Ye}},y.prototype["delete"]=function(e){var t=rt(this,e)["delete"](e);return this.size-=t?1:0,t},y.prototype.get=function(e){return rt(this,e).get(e)},y.prototype.has=function(e){return rt(this,e).has(e)},y.prototype.set=function(e,t){var n=rt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var ot=y;f.Cache=ot;var it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,st=/\\(\\)?/g,at=function(e){var t=f(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(it,function(e,n,r,o){t.push(r?o.replace(st,"$1"):n||e)}),t}),dt=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},lt=1/0,ct=ue?ue.prototype:void 0,pt=ct?ct.toString:void 0,ut=h,gt=function(e){return null==e?"":ut(e)},yt=function(e,t){return ie(e)?e:d(e,t)?[e]:at(gt(e))},ft=function(e){if("string"==typeof e||Oe(e))return e;var t=e+"";return"0"==t&&1/e==-(1/0)?"-0":t},ht=function(e,t){t=yt(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[ft(t[n++])];return n&&n==r?e:void 0},bt=function(e,t,n){var r=null==e?void 0:ht(e,t);return r===void 0?n:r},_t=0/0,mt=/^\s+|\s+$/g,jt=/^[-+]0x[0-9a-f]+$/i,At=/^0b[01]+$/i,xt=/^0o[0-7]+$/i,vt=parseInt,Ot=function(e){if("number"==typeof e)return e;if(Oe(e))return _t;if(ke(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ke(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(mt,"");var n=At.test(e);return n||xt.test(e)?vt(e.slice(2),n?2:8):jt.test(e)?_t:+e},St=1/0,wt=function(e){if(!e)return 0===e?e:0;if(e=Ot(e),e===St||e===-St){var t=0>e?-1:1;return 1.7976931348623157e+308*t}return e===e?e:0},kt=function(e){var t=wt(e),n=t%1;return t===t?n?t-n:t:0},Lt=function(e){return"number"==typeof e&&e==kt(e)},Bt=ce.isFinite,Et=function(e){var t=Math[e];return function(e,n){if(e=Ot(e),n=null==n?0:te(kt(n),292),n&&Bt(e)){var r=(gt(e)+"e").split("e"),o=t(r[0]+"e"+(+r[1]+n));return r=(gt(o)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}("round"),Ut=Et,Pt=function(e,t,n){var r=-1,o=e.length;0>t&&(t=-t>o?0:o+t),n=n>o?o:n,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i},zt=function(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=9007199254740991},Tt=function(e){return null!=e&&zt(e.length)&&!Le(e)},Ct=/^(?:0|[1-9]\d*)$/,Ft=z,Rt=T,Nt=function(e,t,n){t=(n?Rt(e,t,n):void 0===t)?1:K(kt(t),0);var r=null==e?0:e.length;if(!r||1>t)return[];for(var o=0,i=0,s=Array(ee(r/t));o<r;)s[i++]=Pt(e,o,o+=t);return s},Mt=Array.prototype,Vt=Mt.join,Dt=function(e,t){return null==e?"":Vt.call(e,t)},It=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!(!1===t(e[n],n,e)););return e},Ht=function(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var d=s[e?a:++o];if(!1===n(i[d],d,i))break}return t}}(),Wt=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},$t=function(e){return ve(e)&&xe(e)=="[object Arguments]"},qt=Object.prototype,Gt=qt.hasOwnProperty,Qt=qt.propertyIsEnumerable,Jt=$t(function(){return arguments}())?$t:function(e){return ve(e)&&Gt.call(e,"callee")&&!Qt.call(e,"callee")},Xt=function(){return!1},Yt=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&!0&&e&&!e.nodeType&&e,o=r&&r.exports===n,i=o?ce.Buffer:void 0,s=i?i.isBuffer:void 0;e.exports=s||Xt}),Zt={};Zt["[object Float32Array]"]=Zt["[object Float64Array]"]=Zt["[object Int8Array]"]=Zt["[object Int16Array]"]=Zt["[object Int32Array]"]=Zt["[object Uint8Array]"]=Zt["[object Uint8ClampedArray]"]=Zt["[object Uint16Array]"]=Zt["[object Uint32Array]"]=!0,Zt["[object Arguments]"]=Zt["[object Array]"]=Zt["[object ArrayBuffer]"]=Zt["[object Boolean]"]=Zt["[object DataView]"]=Zt["[object Date]"]=Zt["[object Error]"]=Zt["[object Function]"]=Zt["[object Map]"]=Zt["[object Number]"]=Zt["[object Object]"]=Zt["[object RegExp]"]=Zt["[object Set]"]=Zt["[object String]"]=Zt["[object WeakMap]"]=!1;var Kt=function(e){return function(t){return e(t)}},en=n(function(e,t){var n=t&&!t.nodeType&&t,r=n&&!0&&e&&!e.nodeType&&e,o=r&&r.exports===n,i=o&&ae.process,s=function(){try{var e=r&&r.require&&r.require("util").types;return e?e:i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=s}),tn=en&&en.isTypedArray,nn=tn?Kt(tn):function(e){return ve(e)&&zt(e.length)&&!!Zt[xe(e)]},rn=Object.prototype,on=rn.hasOwnProperty,sn=function(e,t){var n=ie(e),r=!n&&Jt(e),o=!n&&!r&&Yt(e),i=!n&&!r&&!o&&nn(e),s=n||r||o||i,a=s?Wt(e.length,String):[],d=a.length;for(var l in e)(t||on.call(e,l))&&!(s&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ft(l,d)))&&a.push(l);return a},an=Object.prototype,dn=function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||an;return e===n},ln=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),cn=Object.prototype,pn=cn.hasOwnProperty,un=function(e){if(!dn(e))return ln(e);var t=[];for(var n in Object(e))pn.call(e,n)&&"constructor"!=n&&t.push(n);return t},gn=function(e){return Tt(e)?sn(e):un(e)},yn=function(e,t){return function(n,r){if(null==n)return n;if(!Tt(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&!(!1===r(s[i],i,s)););return n}}(function(e,t){return e&&Ht(e,t,gn)}),fn=function(e){return e},hn=function(e){return"function"==typeof e?e:fn},bn=function(e,t){var n=ie(e)?It:yn;return n(e,hn(t))},_n=n(function(e,t){(function(n,r){e.exports=t=r()})(ne,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=o.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n==t?4*e.length:n},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var s,a=0;a<o;a++)s=255&n[a>>>2]>>>24-8*(a%4),t[r+a>>>2]|=s<<24-8*((r+a)%4);else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-8*(t%4),e.length=ee(t/4)},clone:function e(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,o,a=[],d=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var o=(n<<16)+t&r;return o/=4294967296,o+=.5,o*(.5<e.random()?1:-1)}},r=0;r<t;r+=4)o=d(4294967296*(n||e.random())),n=987654071*o(),a.push(0|4294967296*o());return new s.init(a,t)}}),a=r.enc={},d=a.Hex={stringify:function(e){for(var t,n=e.words,r=e.sigBytes,o=[],s=0;s<r;s++)t=255&n[s>>>2]>>>24-8*(s%4),o.push((t>>>4).toString(16)),o.push((15&t).toString(16));return o.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new s.init(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=(0,eval)("this").String.fromCharCode,n,r=e.words,o=e.sigBytes,s=[],a=0;a<o;a++)n=255&r[a>>>2]>>>24-8*(a%4),s.push(t(n));return s.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new s.init(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,o=this.blockSize,i=r/(4*o);i=e?ee(i):K((0|i)-this._minBufferSize,0);var a=i*o,d=te(4*a,r);if(a){for(var l=0;l<a;l+=o)this._doProcessBlock(n,l);var c=n.splice(0,a);t.sigBytes-=d}return new s.init(c,d)},clone:function e(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=o.Hasher=p.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),g=r.algo={};return r}(Math);return e})}),mn=n(function(e,t){(function(n,r){e.exports=t=r(_n)})(ne,function(e){return function(){function t(e,t,n){for(var r=[],s=0,a=0;a<t;a++)if(a%4){var d=n[e.charCodeAt(a-1)]<<2*(a%4),l=n[e.charCodeAt(a)]>>>6-2*(a%4);r[s>>>2]|=(d|l)<<24-8*(s%4),s++}return o.create(r,s)}var n=e,r=n.lib,o=r.WordArray,i=n.enc,s=i.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=255&t[s>>>2]>>>24-8*(s%4),d=255&t[s+1>>>2]>>>24-8*((s+1)%4),l=255&t[s+2>>>2]>>>24-8*((s+2)%4),c=0;4>c&&s+.75*c<n;c++)o.push(r.charAt(63&(a<<16|d<<8|l)>>>6*(3-c)));var p=r.charAt(64);if(p)for(;o.length%4;)o.push(p);return o.join("")},parse:function(e){var n=e.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var s=r.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(n=a)}return t(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})}),jn=n(function(e,t){(function(n,r){e.exports=t=r(_n)})(ne,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib,n=t.WordArray,r=n.init,o=n.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],o=0;o<t;o++)n[o>>>2]|=e[o]<<24-8*(o%4);r.call(this,n,t)}else r.apply(this,arguments)};o.prototype=n}}(),e.lib.WordArray})}),An={tagU8A:"[Uint8Array]::",u8arr2b64:function(e){return C(e)?"[Uint8Array]::"+V(e):e},b642u8arr:function(e){return _(e)&&"[Uint8Array]::"===R(e,14)?(e=M(e,14),D(e)):e},tagU16A:"[Uint16Array]::",u16arr2b64:function(e){return F(e)?"[Uint16Array]::"+H(e):e},b642u16arr:function(e){return _(e)&&"[Uint16Array]::"===R(e,15)?(e=M(e,15),$(e)):e}},v=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Pt(e,t,n)},xn=RegExp("["+"\\u200d"+"\\ud800-\\udfff"+("\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff")+"\\ufe0e\\ufe0f"+"]"),vn=function(e){return xn.test(e)},On=en&&en.isRegExp,Sn=On?Kt(On):function(e){return ve(e)&&xe(e)=="[object RegExp]"},wn=function(e){return e.split("")},kn="\\ud800-\\udfff",Ln="["+("\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff")+"]",Bn="\\ud83c[\\udffb-\\udfff]",En="[^"+kn+"]",Un="(?:\\ud83c[\\udde6-\\uddff]){2}",Pn="[\\ud800-\\udbff][\\udc00-\\udfff]",zn="(?:"+Ln+"|"+Bn+")"+"?",Tn="["+"\\ufe0e\\ufe0f"+"]?",Cn="(?:"+"\\u200d"+"(?:"+[En,Un,Pn].join("|")+")"+Tn+zn+")*",Fn="(?:"+[En+Ln+"?",Ln,Un,Pn,"["+kn+"]"].join("|")+")",Rn=RegExp(Bn+"(?="+Bn+")|"+Fn+(Tn+zn+Cn),"g"),Nn=function(e){return e.match(Rn)||[]},Mn=function(e){return vn(e)?Nn(e):wn(e)},Vn=function(e,t,n){return(n&&"number"!=typeof n&&Rt(e,t,n)&&(t=n=void 0),n=void 0===n?4294967295:n>>>0,!n)?[]:(e=gt(e),e&&("string"==typeof t||null!=t&&!Sn(t))&&(t=ut(t),!t&&vn(e))?v(Mn(e),0,n):e.split(t,n))},Dn=function(e,t,r){var o=null==e?0:e.length;return o?(t=r||void 0===t?1:kt(t),Pt(e,0>t?0:t,o)):[]},In=function(e,t,n,r){for(var o=-1,i=K(ee((t-e)/(n||1)),0),s=Array(i);i--;)s[r?i:++o]=e,e+=n;return s},Hn=function(e){return function(t,n,r){return r&&"number"!=typeof r&&Rt(t,n,r)&&(n=r=void 0),t=wt(t),void 0===n?(n=t,t=0):n=wt(n),r=void 0===r?t<n?1:-1:wt(r),In(t,n,r,e)}}(),Wn=Hn,$n={};return function(e){function t(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];setTimeout(function(){a.emit.apply(a,[e].concat(n))},1)}function n(){function n(){t("open")}function l(){i||(t("openOnce"),i=!0)}function c(){t("close"),r()}function p(e){t("error",{msg:"websocket error",err:e}),s.close()}function u(e){Z(e,g)}function g(e){var n=P(e,"_mode");if("execute"!==n)"broadcast"===n?t("broadcast",bt(e,"data")):"deliver"===n?t("deliver",bt(e,"data")):p({msg:"can not find _mode in data",err:e});else if(bt(e,"_id")&&bt(e,"output")){var r=bt(e,"_id"),o=bt(e,"output");d.emit(r,o)}else t("error",{msg:"can not find _id and output in data",err:e})}function y(n,r){s.readyState===s.OPEN&&J(s,e.strSplitLength,n,r,function(e){t("error",{msg:"can not send message",err:e})})}e.url||(e.url="ws://localhost:8080"),e.token||(e.token="*"),e.strSplitLength||(e.strSplitLength=1e6);var f={url:e.url,token:e.token,open:function(){n(),l()},close:function(){c()},message:function(e){u(e)},error:function(e){p(e)}};try{s=new o(f)}catch(e){t("error",{msg:"can not create websocket",err:e}),r()}a.removeAllListeners("triggerExecute"),a.on("triggerExecute",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,o=k();y({_mode:"execute",_id:o,func:e,input:t},r),d.on(o,function(e){n(e),d.removeAllListeners(o)})}),a.removeAllListeners("triggerBroadcast"),a.on("triggerBroadcast",function(e,t){y({_mode:"broadcast",data:e},t)}),a.removeAllListeners("triggerDeliver"),a.on("triggerDeliver",function(e,t){y({_mode:"deliver",data:e},t)})}function r(){setTimeout(function(){t("reconn"),n()},1e3)}var i=!1,s=null,a=new re,d=new re;return a.execute=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},o=b();return t("triggerExecute",e,n,function(e){o.resolve(e)},r),o},a.broadcast=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};t("triggerBroadcast",e,n)},a.deliver=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};t("triggerDeliver",e,n)},n(),a}});
//# sourceMappingURL=w-converws-client.umd.js.map
